<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8">
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>CesiumIonSDKPlugin Demo</title>
    <link rel="stylesheet" href="https://cesiumjs.org/releases/1.63.1/Build/Cesium/Widgets/widgets.css">
    <script src="https://cesiumjs.org/releases/1.63.1/Build/Cesium/Cesium.js"></script>
</head>

<body>
<div id="cesiumContainer" class="fullSize"></div>


///////////////////////////////////////////////////////
                                                     //
<script src ="CesiumIonSDKPlugin.js"></script>       //
                                                     //
///////////////////////////////////////////////////////

<script>
    var viewer = new Cesium.Viewer('cesiumContainer', {
        terrainProvider: Cesium.createWorldTerrain()
    });

    viewer.extend(Cesium.viewerMeasureMixin, {
        units: new Cesium.MeasureUnits({
            distanceUnits : Cesium.DistanceUnits.METERS,
            areaUnits : Cesium.AreaUnits.SQUARE_METERS,
            volumeUnits : Cesium.VolumeUnits.CUBIC_METERS
        })
    });

    var scene = viewer.scene;
    var transformEditor;

    var tileset = new Cesium.Cesium3DTileset({
        url: Cesium.IonResource.fromAssetId(40866)
    });

    viewer.scene.primitives.add(tileset);

    tileset.readyPromise.then(function() {
        var rootTransform = tileset.root.transform;
        var modelMatrix = tileset.modelMatrix;

        // Transfer root transform to the model matrix
        Cesium.Matrix4.clone(rootTransform, modelMatrix);
        Cesium.Matrix4.clone(Cesium.Matrix4.IDENTITY, rootTransform);

        viewer.zoomTo(tileset);

        transformEditor = new Cesium.TransformEditor({
            container: viewer.container,
            scene: scene,
            transform: tileset.modelMatrix,
            boundingSphere: tileset.boundingSphere
        });

        transformEditor.viewModel.activate();

        initialPosition = Cesium.Cartesian3.clone(transformEditor.viewModel.position);
        initialHeadingPitchRoll = Cesium.HeadingPitchRoll.clone(transformEditor.viewModel.headingPitchRoll);
        initialScale = Cesium.Cartesian3.clone(transformEditor.viewModel.scale);
    });
</script>
</body>
</html>
